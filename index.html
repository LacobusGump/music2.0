<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GUMPÂ â€“Â Grand Unified Music Platform</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0a0a0a;
      color: #ff6b9d;
      overflow: hidden;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .neural-bg {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: radial-gradient(circle at var(--x,50%) var(--y,50%),
        rgba(255,107,157,0.15) 0%, rgba(138,43,226,0.1) 30%, rgba(0,0,0,0.95) 70%);
      transition: all .3s ease; z-index:-2;
    }
    .void-layer {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: radial-gradient(circle at 30% 70%,
        rgba(75,0,130,0.8) 0%, rgba(138,43,226,0.6) 40%, rgba(0,0,0,0.98) 100%);
      opacity:0; transition:opacity 2s ease; z-index:-1;
    }
    .void-layer.active { opacity:1; }
    .particles { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }
    .particle {
      position:absolute; width:4px; height:4px;
      background: radial-gradient(circle,#ff1493,transparent);
      border-radius:50%; animation:particle-float 10s ease-in-out infinite;
    }
    @keyframes particle-float {
      0%{transform:translateY(100vh) scale(0);opacity:0}
      10%,90%{opacity:1}
      100%{transform:translateY(-20vh) scale(1);opacity:0}
    }
    .app {
      text-align:center; max-width:400px; width:100%; padding:20px; position:relative; z-index:10;
    }
    .logo {
      font-size:clamp(3rem,12vw,6rem); font-weight:900;
      background:linear-gradient(45deg,#ff6b9d,#8a2be2,#4b0082);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom:.5rem; animation:pulse 3s ease-in-out infinite;
      filter:drop-shadow(0 0 20px rgba(255,107,157,0.4));
    }
    @keyframes pulse {0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .tagline {
      font-size:1.2rem; opacity:.8; margin-bottom:3rem; font-weight:300; color:#8a2be2;
    }
    .start-btn {
      padding:20px 40px; background:linear-gradient(45deg,#ff6b9d,#8a2be2);
      color:#fff; border:none; border-radius:30px; font-size:1.2rem; font-weight:700;
      cursor:pointer; transition:all .3s ease; box-shadow:0 10px 30px rgba(255,107,157,0.3);
      margin-bottom:2rem;
    }
    .start-btn:hover {transform:translateY(-3px);box-shadow:0 15px 40px rgba(255,107,157,0.5);}
    .spatial-viz {
      width:100%; height:200px; border:2px solid rgba(255,107,157,0.3);
      border-radius:20px; position:relative; overflow:hidden;
      background:rgba(255,107,157,0.05); margin-bottom:2rem; transition:all 1s ease;
    }
    .spatial-viz.transcendent {
      border-color:rgba(255,20,147,0.5);
      background:rgba(10,10,10,0.95);
      box-shadow:inset 0 0 30px rgba(255,20,147,0.3);
    }
    .orb {
      position:absolute; width:60px; height:60px; border-radius:50%;
      background:radial-gradient(circle,#ff6b9d 0%,rgba(138,43,226,0.4) 50%,transparent 100%);
      top:50%; left:50%; transform:translate(-50%,-50%); transition:all .2s ease;
      box-shadow:0 0 40px rgba(255,107,157,0.6);
    }
    .orb.transcendent {
      background:radial-gradient(circle,#ff1493 0%,#9370db 40%,transparent 100%);
      box-shadow:0 0 80px rgba(255,20,147,0.8),0 0 160px rgba(147,112,219,0.5);
      animation:float 5s ease-in-out infinite;
    }
    @keyframes float {0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-48%,-52%) scale(1.4)}}
    .stats {
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:2rem;
    }
    .stat {
      background:rgba(255,107,157,0.1); padding:12px; border-radius:12px;
      border:1px solid rgba(255,107,157,0.3); transition:all .5s ease;
    }
    .stat.transcendent {
      background:rgba(255,20,147,0.2); border-color:rgba(255,20,147,0.4);
    }
    .stat-value {
      font-size:1.3rem; font-weight:700; color:#ff6b9d;
    }
    .stat-value.transcendent { color:#ff1493; }
    .stat-label { font-size:.7rem; opacity:.7; margin-top:3px; }
    .status {
      font-size:.9rem; color:#8a2be2; opacity:.8; animation:status-pulse 2s ease-in-out infinite;
    }
    .status.transcendent { color:#ff1493; }
    @keyframes status-pulse {0%,100%{opacity:.8}50%{opacity:1}}
    .trail {
      position:absolute; width:3px; height:3px;
      background:radial-gradient(circle,#ff6b9d,transparent);
      border-radius:50%; opacity:0; animation:trail-fade 2s ease-out forwards;
    }
    @keyframes trail-fade {0%{opacity:.9;transform:scale(1)}100%{opacity:0;transform:scale(.2)}}
    .hidden { display:none!important; }
    .error {
      background:rgba(255,107,107,0.1); border:1px solid rgba(255,107,107,0.3);
      border-radius:15px; padding:20px; color:#ff6b6b; margin-top:20px;
    }
  </style>
</head>
<body>
  <div class="neural-bg" id="neuralBg"></div>
  <div class="void-layer" id="voidLayer"></div>
  <div class="particles" id="particles"></div>

  <div class="app">
    <div class="logo" id="logo">GUMP</div>
    <div class="tagline" id="tagline">Grand Unified Music Platform</div>
    
    <button class="start-btn" id="startBtn">ðŸŽµ Enter The Void</button>
    
    <div class="spatial-viz hidden" id="spatialViz">
      <div class="orb" id="orb"></div>
      <div class="neural-trails" id="neuralTrails"></div>
    </div>
    
    <div class="stats hidden" id="stats">
      <div class="stat"><div class="stat-value" id="motionValue">0</div><div class="stat-label">Motion</div></div>
      <div class="stat"><div class="stat-value" id="bpmValue">80</div><div class="stat-label">BPM</div></div>
      <div class="stat"><div class="stat-value" id="stateValue">DREAMY</div><div class="stat-label">Vibe</div></div>
    </div>
    
    <div class="status hidden" id="status">ðŸŒ™ Entering dreamscape...</div>
    <div class="error hidden" id="error"></div>
  </div>

  <script>
    class SynthPopAI {
      constructor() {
        this.ctx = null;
        this.motion = 0;
        this.bpm = 80;
        this.position = { x: 50, y: 50 };
        this.lastAccel = { x: 0, y: 0, z: 0 };
        this.active = false;
        this.step = 0;
        this.state = 'DREAMY';
        this.transcendent = false;
        this.transcendentLevel = 0;
        this.lastMotionTime = Date.now();
        this.currentChord = 0;
        this.arpStep = 0;
        this.bassStep = 0;
        
        this.chords = {
          dreamy: [[0,2,4],[5,0,2],[3,5,0],[4,6,1]],
          dark:   [[0,3,5],[1,4,6],[2,5,0],[3,6,1]],
          ethereal:[[0,2,4,6],[3,5,0,2],[1,4,6,0],[2,5,1,4]]
        };
        
        this.scales = {
          minor:      [261.63,293.66,311.13,349.23,392.00,415.30,466.16,523.25],
          dorian:     [261.63,293.66,311.13,349.23,392.00,440.00,493.88,523.25],
          pentatonic: [261.63,293.66,349.23,392.00,440.00,523.25,587.33,698.46]
        };
        
        this.currentScale = this.scales.minor;
        this.init();
      }
      
      init() {
        document.getElementById('startBtn').onclick = () => this.start();
        this.createNeuralBackground();
      }
      
      createNeuralBackground() {
        const bg = document.getElementById('neuralBg');
        const loop = () => {
          const t = Date.now() * 0.0008;
          const x = 50 + Math.sin(t * 0.7) * 25;
          const y = 50 + Math.cos(t * 0.5) * 20;
          bg.style.setProperty('--x', x + '%');
          bg.style.setProperty('--y', y + '%');
          requestAnimationFrame(loop);
        };
        loop();
      }
      
      async start() {
        try {
          this.ctx = new (window.AudioContext||window.webkitAudioContext)();
          if(this.ctx.state==='suspended') await this.ctx.resume();
          await this.playTestSound();
          
          if(DeviceMotionEvent?.requestPermission) {
            const p = await DeviceMotionEvent.requestPermission();
            if(p!=='granted') throw new Error('Motion denied');
          }
          
          this.createAudioEffects();
          this.showInterface();
          this.startMotionTracking();
          this.startAudioEngine();
          this.monitorTranscendence();
        } catch(e) {
          this.showError('Init failed: '+e.message);
          this.startMouseTracking();
        }
      }
      
      async playTestSound() {
        const o=this.ctx.createOscillator(),g=this.ctx.createGain();
        o.frequency.value=440; g.gain.setValueAtTime(0.1,this.ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.001,this.ctx.currentTime+0.2);
        o.connect(g).connect(this.ctx.destination);
        o.start(); o.stop(this.ctx.currentTime+0.2);
      }
      
      createAudioEffects() {
        // reverb
        this.reverb=this.ctx.createConvolver();
        const buf=this.ctx.createBuffer(2,this.ctx.sampleRate*2,this.ctx.sampleRate);
        for(let c=0;c<2;c++){
          const d=buf.getChannelData(c);
          for(let i=0;i<d.length;i++) d[i]=(Math.random()*2-1)*Math.pow(1-i/d.length,2);
        }
        this.reverb.buffer=buf; this.reverb.connect(this.ctx.destination);
        // delay
        this.delay=this.ctx.createDelay(); this.delayGain=this.ctx.createGain();
        this.delay.delayTime.value=0.3; this.delayGain.gain.value=0.3;
        this.delay.connect(this.delayGain); this.delayGain.connect(this.reverb);
        // filter
        this.filter=this.ctx.createBiquadFilter();
        this.filter.type='lowpass'; this.filter.frequency.value=1500; this.filter.Q.value=3;
        this.filter.connect(this.reverb); this.filter.connect(this.delay);
      }
      
      showInterface() {
        document.getElementById('startBtn').classList.add('hidden');
        ['spatialViz','stats','status'].forEach(id=>document.getElementById(id).classList.remove('hidden'));
        this.active=true;
      }
      showError(msg){
        const e=document.getElementById('error');
        e.textContent=msg; e.classList.remove('hidden');
      }
      
      startMotionTracking(){
        if(!window.DeviceMotionEvent){ this.startMouseTracking(); return; }
        window.addEventListener('devicemotion',e=>{
          if(!this.active) return;
          const a=e.accelerationIncludingGravity;
          if(!a||a.x===null) return;
          const dx=Math.abs(a.x-this.lastAccel.x), dy=Math.abs(a.y-this.lastAccel.y), dz=Math.abs(a.z-this.lastAccel.z);
          this.motion=Math.min(100,Math.sqrt(dx*dx+dy*dy+dz*dz)*8);
          this.lastAccel={x:a.x,y:a.y,z:a.z};
          this.position.x=Math.max(5,Math.min(95,50+a.x*2));
          this.position.y=Math.max(5,Math.min(95,50+a.y*2));
          if(this.motion>3) this.lastMotionTime=Date.now();
          this.updateState(); this.updateVisualization();
        },{passive:true});
      }
      startMouseTracking(){
        let lm={x:0,y:0};
        document.addEventListener('mousemove',e=>{
          if(!this.active)return;
          const dx=e.clientX-lm.x, dy=e.clientY-lm.y;
          this.motion=Math.min(100,Math.sqrt(dx*dx+dy*dy)*1.2);
          this.position.x=(e.clientX/window.innerWidth)*100;
          this.position.y=(e.clientY/window.innerHeight)*100;
          lm={x:e.clientX,y:e.clientY};
          if(this.motion>3) this.lastMotionTime=Date.now();
          this.updateState(); this.updateVisualization();
        });
      }
      
      updateState(){
        if(this.transcendent){
          const states=['VOID','COSMIC','INFINITE','ETERNAL'];
          this.state=states[Math.floor(this.transcendentLevel*4)]||'VOID';
          this.bpm=65+this.transcendentLevel*25;
          this.currentScale=this.scales.pentatonic;
        } else {
          if(this.motion<10){this.state='DREAMY';this.bpm=75+this.motion*0.3; this.currentScale=this.scales.minor;}
          else if(this.motion<40){this.state='SYNTHY';this.bpm=85+this.motion*0.4; this.currentScale=this.scales.dorian;}
          else{this.state='ELECTRIC';this.bpm=105+this.motion*0.25; this.currentScale=this.scales.pentatonic;}
        }
        document.getElementById('motionValue').textContent=Math.round(this.motion);
        document.getElementById('bpmValue').textContent=Math.round(this.bpm);
        document.getElementById('stateValue').textContent=this.state;
      }
      
      updateVisualization(){
        const o=document.getElementById('orb');
        o.style.left=this.position.x+'%'; o.style.top=this.position.y+'%';
        const t=document.createElement('div'); t.className='trail';
        t.style.left=this.position.x+'%'; t.style.top=this.position.y+'%';
        document.getElementById('neuralTrails').appendChild(t);
        setTimeout(()=>t.remove(),2000);
      }
      
      monitorTranscendence(){
        const chk=()=>{
          if(!this.active)return;
          const st=Date.now()-this.lastMotionTime;
          const go=st>3000;
          if(go&&!this.transcendent) this.enterTranscendence();
          if(!go&&this.transcendent) this.exitTranscendence();
          if(this.transcendent) this.transcendentLevel=Math.min(1,(st-3000)/8000);
          setTimeout(chk,200);
        };
        chk();
      }
      
      enterTranscendence(){
        this.transcendent=true;
        document.getElementById('voidLayer').classList.add('active');
        ['logo','tagline','spatialViz','orb','status'].forEach(id=>
          document.getElementById(id).classList.add('transcendent')
        );
        document.querySelectorAll('.stat,.stat-value').forEach(el=>
          el.classList.add('transcendent')
        );
        this.createTranscendentParticles();
      }
      exitTranscendence(){
        this.transcendent=false;
        document.getElementById('voidLayer').classList.remove('active');
        ['logo','tagline','spatialViz','orb','status'].forEach(id=>
          document.getElementById(id).classList.remove('transcendent')
        );
        document.querySelectorAll('.stat,.stat-value').forEach(el=>
          el.classList.remove('transcendent')
        );
        document.getElementById('particles').innerHTML='';
      }
      createTranscendentParticles(){
        const c=document.getElementById('particles');
        for(let i=0;i<15;i++){
          const p=document.createElement('div');
          p.className='particle';
          p.style.left=Math.random()*100+'%';
          p.style.animationDelay=Math.random()*10+'s';
          c.appendChild(p);
        }
      }
      
      startAudioEngine(){
        const tick=()=>{
          if(!this.active)return;
          if(this.transcendent) this.playTranscendentSounds();
          else this.playRegularSounds();
          this.step=(this.step+1)%32;
          this.arpStep=(this.arpStep+1)%8;
          this.bassStep=(this.bassStep+1)%16;
          if(this.step===0) this.currentChord=(this.currentChord+1)%4;
          setTimeout(tick,60000/this.bpm/8);
        };
        tick();
      }
      playRegularSounds(){
        const m=this.motion;
        if(this.step%8===0) this.playSound('kick');
        if(this.step%16===8) this.playSound('snare');
        if(this.step%4===2&&m>20) this.playSound('hihat');
        if(this.bassStep%4===0) this.playSound('bass');
        if(this.arpStep%2===0&&m>10) this.playSound('arp');
        if(this.step%16===0) this.playSound('pad');
        if(this.step%8===4&&m>25) this.playSound('lead');
      }
      playTranscendentSounds(){
        const lvl=this.transcendentLevel;
        if(this.step%16===0) this.playSound('ethereal');
        if(this.step%12===0&&lvl>0.3) this.playSound('ambient');
        if(this.step%8===4&&lvl>0.6) this.playSound('cosmic');
        if(this.step%6===0&&lvl>0.8) this.playSound('void');
      }
      playSound(type){
        const o=this.ctx.createOscillator(),g=this.ctx.createGain(),now=this.ctx.currentTime;
        switch(type){
          case'kick':
            o.frequency.setValueAtTime(60,now);
            o.frequency.exponentialRampToValueAtTime(30,now+0.1);
            g.gain.setValueAtTime(0.8,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.3);
            o.connect(g).connect(this.ctx.destination);
            break;
          case'snare':
            o.type='square';o.frequency.value=300;
            g.gain.setValueAtTime(0.4,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.12);
            o.connect(g).connect(this.filter);
            break;
          case'hihat':
            o.type='square';o.frequency.value=8000;
            g.gain.setValueAtTime(0.1,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.05);
            o.connect(g).connect(this.filter);
            break;
          case'bass':
            o.type='sawtooth';
            const cn=this.chords.dreamy[this.currentChord];
            o.frequency.value=this.currentScale[cn[0]]*0.5;
            g.gain.setValueAtTime(0.25,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.5);
            o.connect(g).connect(this.filter);
            break;
          case'arp':
            o.type='square';
            const an=this.chords.dreamy[this.currentChord];
            o.frequency.value=this.currentScale[an[this.arpStep%an.length]];
            g.gain.setValueAtTime(0.15,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.3);
            o.connect(g).connect(this.filter);
            break;
          case'pad':
            o.type='triangle';
            const pn=this.chords.dreamy[this.currentChord];
            o.frequency.value=this.currentScale[pn[0]]*2;
            g.gain.setValueAtTime(0.08,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+2);
            o.connect(g).connect(this.reverb);
            break;
          case'lead':
            o.type='sawtooth';
            const ln=this.currentScale[Math.floor(Math.random()*this.currentScale.length)];
            o.frequency.value=ln*2;
            g.gain.setValueAtTime(0.12,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+0.4);
            o.connect(g).connect(this.delay);
            break;
          case'ethereal':
            o.type='sine';
            o.frequency.value=this.currentScale[0]*4;
            g.gain.setValueAtTime(0.06,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+3);
            o.connect(g).connect(this.reverb);
            break;
          case'ambient':
            o.type='triangle';
            o.frequency.value=this.currentScale[2]*0.25;
            g.gain.setValueAtTime(0.04,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+4);
            o.connect(g).connect(this.reverb);
            break;
          case'cosmic':
            o.type='sine';
            o.frequency.value=this.currentScale[4]*3;
            o.frequency.exponentialRampToValueAtTime(this.currentScale[6]*3,now+1);
            g.gain.setValueAtTime(0.05,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+2);
            o.connect(g).connect(this.reverb);
            break;
          case'void':
            o.type='sine';
            o.frequency.value=this.currentScale[0]*0.125;
            g.gain.setValueAtTime(0.05,now);
            g.gain.exponentialRampToValueAtTime(0.001,now+4);
            o.connect(g).connect(this.reverb);
            break;
        }
        o.start(now);
        o.stop(now+4);
      }
    }

    window.addEventListener('DOMContentLoaded',()=>new SynthPopAI());
  </script>
</body>
</html>
