<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GUMP - Spatial Motion AI Music</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at 40% 60%, #0a0a0a 0%, #1a1a2e 40%, #16213e 100%);
      color: #00ffaa;
      overflow: hidden;
      touch-action: none;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 1s ease;
    }
    body.transcendent {
      background: radial-gradient(circle at 60% 40%, #0a0a1a 0%, #1a0a2e 30%, #2a1a3e 60%, #3a2a4e 100%);
      color: #ff88cc;
    }
    .app {
      width: 100%; max-width: 400px; padding: 20px; text-align: center;
    }
    .logo {
      font-size: clamp(3rem,12vw,6rem); font-weight:900;
      background: linear-gradient(45deg,#00ffaa,#ff6b6b,#4ecdc4);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      margin-bottom: .5rem; animation: pulse 3s ease-in-out infinite;
      transition: all 1s ease;
    }
    @keyframes pulse {0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
    .tagline {
      font-size: clamp(1rem,4vw,1.2rem); opacity:.8; margin-bottom:3rem; font-weight:300;
      transition: all 1s ease;
    }
    .start-btn {
      padding:20px 40px; background:linear-gradient(45deg,#00ffaa,#4ecdc4);
      color:#000; border:none; border-radius:30px; font-size:1.2rem; font-weight:700;
      cursor:pointer; transition:all .3s ease; box-shadow:0 10px 30px rgba(0,255,170,0.3);
      margin-bottom:2rem;
    }
    .start-btn:hover {transform: translateY(-3px); box-shadow:0 15px 40px rgba(0,255,170,0.5);}
    .spatial-viz {
      width:100%; height:200px; border:2px solid rgba(0,255,170,0.2);
      border-radius:20px; position:relative; overflow:hidden;
      background:rgba(0,255,170,0.03); margin-bottom:2rem;
      transition: all 1s ease;
    }
    .orb {
      position:absolute; width:60px; height:60px; border-radius:50%;
      background:radial-gradient(circle,#00ffaa,transparent);
      top:50%; left:50%; transform:translate(-50%,-50%);
      transition:all .2s ease; box-shadow:0 0 30px rgba(0,255,170,0.5);
    }
    .hidden { display:none !important; }
    .error {
      background:rgba(255,107,107,0.1); border:1px solid rgba(255,107,107,0.3);
      border-radius:15px; padding:20px; color:#ff6b6b; margin-top:20px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="logo" id="logo">GUMP</div>
    <div class="tagline" id="tagline">Grand Unified Music Platform</div>
    <button class="start-btn" id="startBtn">ðŸŽµ Start Spatial Audio</button>
    <div class="spatial-viz hidden" id="spatialViz">
      <div class="orb" id="orb"></div>
    </div>
    <div class="stats hidden" id="stats">
      <div class="stat"><div class="stat-value" id="motionValue">0</div><div class="stat-label">Motion</div></div>
      <div class="stat"><div class="stat-value" id="bpmValue">95</div><div class="stat-label">BPM</div></div>
      <div class="stat"><div class="stat-value" id="grooveValue">CHILL</div><div class="stat-label">State</div></div>
    </div>
    <div class="status hidden" id="status">ðŸŽµ Flowing with your vibe...</div>
    <div class="error hidden" id="error"></div>
  </div>

  <script>
    class SpatialAI {
      constructor() {
        this.ctx=null; this.motion=0; this.bpm=95; this.pos={x:50,y:50};
        this.last={x:0,y:0,z:0}; this.active=false; this.step=0;
        this.state='CHILL'; this.init();
      }
      init() {
        document.getElementById('startBtn').onclick = () => this.start();
      }
      async start() {
        try {
          this.ctx = new (window.AudioContext||window.webkitAudioContext)();
          await this.ctx.resume();
          document.getElementById('startBtn').classList.add('hidden');
          ['spatialViz','stats','status'].forEach(id=>
            document.getElementById(id).classList.remove('hidden')
          );
          this.active=true; this.startSensors(); this.animate();
        } catch(e) {
          this.showError('Audio init failed');
        }
      }
      startSensors() {
        if (typeof DeviceMotionEvent.requestPermission === 'function') {
          DeviceMotionEvent.requestPermission()
            .then(res => {
              if (res==='granted') window.addEventListener('devicemotion', e=>this.handleMotion(e));
              else this.showError('Motion permission denied');
            })
            .catch(()=>this.showError('Motion permission error'));
        } else if ('DeviceMotionEvent' in window) {
          window.addEventListener('devicemotion', e=>this.handleMotion(e));
        } else {
          this.showError('Motion not supported');
        }
      }
      handleMotion(e) {
        if (!this.active) return;
        const a = e.accelerationIncludingGravity;
        if (!a) return;
        const dx = a.x - this.last.x, dy = a.y - this.last.y, dz = a.z - this.last.z;
        this.motion = Math.min(100, Math.hypot(dx,dy,dz)*10);
        this.last = {x:a.x,y:a.y,z:a.z};
        this.pos.x = 50 + a.x*2; this.pos.y = 50 + a.y*2;
        document.getElementById('motionValue').textContent = Math.round(this.motion);
      }
      animate() {
        const upd = () => {
          if (!this.active) return;
          document.getElementById('bpmValue').textContent = Math.round(this.bpm);
          document.getElementById('grooveValue').textContent = this.state;
          const orb = document.getElementById('orb');
          orb.style.left = this.pos.x+'%'; orb.style.top = this.pos.y+'%';
          requestAnimationFrame(upd);
        };
        upd();
      }
      showError(msg) {
        const e = document.getElementById('error');
        e.textContent = msg; e.classList.remove('hidden');
      }
    }
    window.addEventListener('DOMContentLoaded', ()=>new SpatialAI());
  </script>
</body>
</html>
