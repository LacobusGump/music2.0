<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GUMP: Grand Unified Music Platform</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Courier New', monospace;
      background: radial-gradient(circle at 50% 50%, #001a2e 0%, #000814 50%, #000000 100%);
      color: #00d4ff;
      overflow: hidden;
      height: 100vh;
      cursor: none;
    }
    
    .universe {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    
    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #00d4ff;
      border-radius: 50%;
      animation: float 20s linear infinite;
    }
    
    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-20px) rotate(360deg); opacity: 0; }
    }
    
    .consciousness {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 10;
    }
    
    .soul-title {
      font-size: clamp(2rem, 8vw, 6rem);
      background: linear-gradient(45deg, #00d4ff, #ff006e, #8338ec, #00d4ff);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: soulPulse 4s ease-in-out infinite, colorShift 8s linear infinite;
      margin-bottom: 2rem;
      text-shadow: 0 0 40px rgba(0, 212, 255, 0.5);
    }
    
    @keyframes soulPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes colorShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .awakening-btn {
      padding: 20px 40px;
      background: linear-gradient(45deg, transparent, rgba(0, 212, 255, 0.2), transparent);
      border: 2px solid #00d4ff;
      color: #00d4ff;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      transition: all 0.3s ease;
      backdrop-filter: blur(20px);
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
    }
    
    .awakening-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 50px rgba(0, 212, 255, 0.3);
    }
    
    .awakening-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .awakening-btn:hover::before {
      left: 100%;
    }
    
    .neural-network {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 300px;
      height: 200px;
      background: rgba(0, 212, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(0, 212, 255, 0.3);
      padding: 20px;
      transform: translateX(100%);
      transition: transform 0.5s ease;
    }
    
    .neural-network.active {
      transform: translateX(0);
    }
    
    .synapse {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
      font-size: 0.9rem;
    }
    
    .neural-bar {
      flex: 1;
      height: 6px;
      background: rgba(0, 212, 255, 0.2);
      border-radius: 3px;
      margin: 0 10px;
      overflow: hidden;
    }
    
    .neural-pulse {
      height: 100%;
      background: linear-gradient(90deg, #00d4ff, #ff006e, #8338ec);
      border-radius: 3px;
      transition: width 0.1s ease;
      box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    }
    
    .frequency-visualizer {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 60px;
      display: flex;
      align-items: end;
      justify-content: center;
      gap: 2px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .frequency-visualizer.active {
      opacity: 1;
    }
    
    .freq-bar {
      width: 4px;
      background: linear-gradient(to top, #00d4ff, #ff006e);
      border-radius: 2px;
      transition: height 0.1s ease;
      box-shadow: 0 0 5px rgba(0, 212, 255, 0.3);
    }
    
    .motion-aura {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 400px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
      pointer-events: none;
      transition: all 0.3s ease;
    }
    
    .hidden { display: none; }
    
    .permission-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .permission-content {
      background: rgba(0, 20, 40, 0.9);
      padding: 30px;
      border-radius: 20px;
      border: 2px solid #00d4ff;
      text-align: center;
      max-width: 400px;
      backdrop-filter: blur(20px);
    }
    
    .permission-content h3 {
      margin-bottom: 20px;
      color: #00d4ff;
    }
    
    .permission-content p {
      margin-bottom: 20px;
      color: #ccc;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="universe" id="universe"></div>
  
  <div class="consciousness">
    <h1 class="soul-title">GUMP</h1>
    <div style="font-size: 1.2rem; margin-bottom: 2rem; color: #8338ec; letter-spacing: 1px;">
      Grand Unified Music Platform
    </div>
    <button class="awakening-btn" id="awakenBtn">AWAKEN THE MUSIC</button>
  </div>
  
  <div class="neural-network" id="neuralNetwork">
    <div class="synapse">
      <span>Motion</span>
      <div class="neural-bar">
        <div class="neural-pulse" id="motionPulse"></div>
      </div>
      <span id="motionValue">0%</span>
    </div>
    <div class="synapse">
      <span>Rhythm</span>
      <div class="neural-bar">
        <div class="neural-pulse" id="rhythmPulse"></div>
      </div>
      <span id="rhythmValue">0 BPM</span>
    </div>
    <div class="synapse">
      <span>Harmony</span>
      <div class="neural-bar">
        <div class="neural-pulse" id="harmonyPulse"></div>
      </div>
      <span id="harmonyValue">Silent</span>
    </div>
    <div class="synapse">
      <span>Soul</span>
      <div class="neural-bar">
        <div class="neural-pulse" id="soulPulse"></div>
      </div>
      <span id="soulValue">Sleeping</span>
    </div>
  </div>
  
  <div class="frequency-visualizer" id="frequencyViz">
    <!-- Frequency bars will be generated here -->
  </div>
  
  <div class="motion-aura" id="motionAura"></div>
  
  <div class="permission-modal hidden" id="permissionModal">
    <div class="permission-content">
      <h3>ðŸŽµ Unleash GUMP</h3>
      <p>The Grand Unified Music Platform needs access to your device's motion sensors to create music that moves with your soul.</p>
      <button class="awakening-btn" id="allowBtn">Allow Motion Access</button>
    </div>
  </div>

  <script>
    class GumpSymphony {
      constructor() {
        this.isAwake = false;
        this.motion = 0;
        this.motionHistory = [];
        this.smoothMotion = 0;
        this.lastTime = 0;
        this.step = 0;
        this.synths = {};
        this.effects = {};
        this.patterns = {};
        this.harmonics = [];
        this.soulState = 'sleeping';
        
        // Advanced motion tracking
        this.motionSensors = {
          accelerometer: { x: 0, y: 0, z: 0 },
          gyroscope: { x: 0, y: 0, z: 0 },
          mouse: { x: 0, y: 0, velocity: 0 },
          orientation: { alpha: 0, beta: 0, gamma: 0 }
        };
        
        this.lastMouse = { x: 0, y: 0, time: 0 };
        this.mouseVelocity = 0;
        
        this.init();
      }
      
      async init() {
        this.createUniverse();
        this.setupEventListeners();
        this.createFrequencyVisualizer();
        this.animate();
      }
      
      createUniverse() {
        const universe = document.getElementById('universe');
        for (let i = 0; i < 100; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + 'vw';
          particle.style.animationDelay = Math.random() * 20 + 's';
          particle.style.animationDuration = (15 + Math.random() * 10) + 's';
          universe.appendChild(particle);
        }
      }
      
      setupEventListeners() {
        document.getElementById('awakenBtn').onclick = () => this.awaken();
        document.getElementById('allowBtn').onclick = () => this.requestPermissions();
        
        // Advanced mouse tracking
        document.addEventListener('mousemove', (e) => this.handleMouseMotion(e));
        document.addEventListener('click', (e) => this.handleClick(e));
        document.addEventListener('wheel', (e) => this.handleWheel(e));
        
        // Touch events for mobile
        document.addEventListener('touchstart', (e) => this.handleTouch(e));
        document.addEventListener('touchmove', (e) => this.handleTouch(e));
        document.addEventListener('touchend', (e) => this.handleTouchEnd(e));
      }
      
      async awaken() {
        try {
          await Tone.start();
          document.querySelector('.consciousness').classList.add('hidden');
          document.getElementById('neuralNetwork').classList.add('active');
          document.getElementById('frequencyViz').classList.add('active');
          
          await this.initializeAudioSoul();
          await this.initializeMotionSensors();
          
          this.isAwake = true;
          this.soulState = 'awakening';
          this.startSymphony();
          
        } catch (error) {
          console.error('Awakening failed:', error);
          this.fallbackToMouseControl();
        }
      }
      
      async initializeMotionSensors() {
        // Try to get device motion permission
        if (typeof DeviceMotionEvent !== 'undefined' && 
            typeof DeviceMotionEvent.requestPermission === 'function') {
          
          const permission = await DeviceMotionEvent.requestPermission();
          if (permission === 'granted') {
            this.setupDeviceMotion();
          } else {
            this.showPermissionModal();
          }
        } else if (typeof DeviceMotionEvent !== 'undefined') {
          this.setupDeviceMotion();
        } else {
          this.fallbackToMouseControl();
        }
        
        // Try to get device orientation
        if (typeof DeviceOrientationEvent !== 'undefined' && 
            typeof DeviceOrientationEvent.requestPermission === 'function') {
          
          const permission = await DeviceOrientationEvent.requestPermission();
          if (permission === 'granted') {
            this.setupDeviceOrientation();
          }
        } else if (typeof DeviceOrientationEvent !== 'undefined') {
          this.setupDeviceOrientation();
        }
      }
      
      setupDeviceMotion() {
        window.addEventListener('devicemotion', (event) => {
          if (event.accelerationIncludingGravity) {
            this.motionSensors.accelerometer = {
              x: event.accelerationIncludingGravity.x || 0,
              y: event.accelerationIncludingGravity.y || 0,
              z: event.accelerationIncludingGravity.z || 0
            };
          }
          
          if (event.rotationRate) {
            this.motionSensors.gyroscope = {
              x: event.rotationRate.alpha || 0,
              y: event.rotationRate.beta || 0,
              z: event.rotationRate.gamma || 0
            };
          }
          
          this.processMotionData();
        });
      }
      
      setupDeviceOrientation() {
        window.addEventListener('deviceorientation', (event) => {
          this.motionSensors.orientation = {
            alpha: event.alpha || 0,
            beta: event.beta || 0,
            gamma: event.gamma || 0
          };
        });
      }
      
      showPermissionModal() {
        document.getElementById('permissionModal').classList.remove('hidden');
      }
      
      async requestPermissions() {
        try {
          if (typeof DeviceMotionEvent.requestPermission === 'function') {
            const permission = await DeviceMotionEvent.requestPermission();
            if (permission === 'granted') {
              this.setupDeviceMotion();
            }
          }
          
          if (typeof DeviceOrientationEvent.requestPermission === 'function') {
            const permission = await DeviceOrientationEvent.requestPermission();
            if (permission === 'granted') {
              this.setupDeviceOrientation();
            }
          }
          
          document.getElementById('permissionModal').classList.add('hidden');
        } catch (error) {
          console.error('Permission request failed:', error);
          this.fallbackToMouseControl();
        }
      }
      
      fallbackToMouseControl() {
        console.log('Using mouse/touch control');
        this.soulState = 'mouse_mode';
      }
      
      handleMouseMotion(event) {
        const now = Date.now();
        const dt = now - this.lastMouse.time;
        
        if (dt > 0) {
          const dx = event.clientX - this.lastMouse.x;
          const dy = event.clientY - this.lastMouse.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          this.mouseVelocity = distance / dt * 100; // Scale for better response
          this.motionSensors.mouse = {
            x: event.clientX,
            y: event.clientY,
            velocity: this.mouseVelocity
          };
        }
        
        this.lastMouse = { x: event.clientX, y: event.clientY, time: now };
        
        if (this.isAwake) {
          this.processMotionData();
        }
      }
      
      handleClick(event) {
        if (this.isAwake) {
          this.triggerSoulBurst(event.clientX / window.innerWidth, event.clientY / window.innerHeight);
        }
      }
      
      handleWheel(event) {
        if (this.isAwake) {
          const scrollIntensity = Math.abs(event.deltaY) / 100;
          this.motion = Math.min(100, this.motion + scrollIntensity * 10);
        }
      }
      
      handleTouch(event) {
        if (event.touches.length > 0) {
          const touch = event.touches[0];
          this.handleMouseMotion({ clientX: touch.clientX, clientY: touch.clientY });
        }
      }
      
      handleTouchEnd(event) {
        if (this.isAwake) {
          this.motion *= 0.8; // Gradual decay
        }
      }
      
      processMotionData() {
        let totalMotion = 0;
        
        // Process accelerometer data
        const acc = this.motionSensors.accelerometer;
        const acceleration = Math.sqrt(acc.x * acc.x + acc.y * acc.y + acc.z * acc.z);
        const motionFromAccel = Math.max(0, (acceleration - 9.8) * 8); // Remove gravity
        
        // Process gyroscope data
        const gyro = this.motionSensors.gyroscope;
        const rotation = Math.sqrt(gyro.x * gyro.x + gyro.y * gyro.y + gyro.z * gyro.z);
        const motionFromGyro = rotation * 2;
        
        // Process mouse velocity
        const motionFromMouse = Math.min(50, this.mouseVelocity * 2);
        
        // Combine all motion sources
        totalMotion = Math.max(motionFromAccel, motionFromGyro, motionFromMouse);
        
        // Apply exponential decay
        this.mouseVelocity *= 0.9;
        
        // Smooth the motion
        this.motionHistory.push(totalMotion);
        if (this.motionHistory.length > 8) {
          this.motionHistory.shift();
        }
        
        this.motion = this.motionHistory.reduce((a, b) => a + b, 0) / this.motionHistory.length;
        this.smoothMotion = this.motion * 0.3 + this.smoothMotion * 0.7;
        
        // Update soul state
        this.updateSoulState();
      }
      
      updateSoulState() {
        const intensity = this.smoothMotion / 100;
        
        if (intensity < 0.05) {
          this.soulState = 'meditating';
        } else if (intensity < 0.2) {
          this.soulState = 'breathing';
        } else if (intensity < 0.4) {
          this.soulState = 'dancing';
        } else if (intensity < 0.7) {
          this.soulState = 'flowing';
        } else {
          this.soulState = 'transcending';
        }
      }
      
      async initializeAudioSoul() {
        // Create a living, breathing audio ecosystem
        
        // The Heart - Deep bass that pulses with life
        this.synths.heart = new Tone.MonoSynth({
          oscillator: { type: 'sine' },
          envelope: { attack: 0.1, decay: 0.8, sustain: 0.2, release: 1.5 },
          filter: { Q: 4, type: 'lowpass', rolloff: -24 },
          filterEnvelope: { attack: 0.1, decay: 0.8, sustain: 0.2, release: 1.5, baseFrequency: 80, octaves: 3 }
        }).toDestination();
        
        // The Breath - Rhythmic percussion
        this.synths.breath = new Tone.NoiseSynth({
          noise: { type: 'white' },
          envelope: { attack: 0.001, decay: 0.1, sustain: 0.0, release: 0.05 }
        }).toDestination();
        
        // The Mind - Melodic consciousness
        this.synths.mind = new Tone.PolySynth(Tone.Synth, {
          oscillator: { type: 'sawtooth' },
          envelope: { attack: 0.2, decay: 0.5, sustain: 0.3, release: 1.0 },
          filter: { Q: 2, type: 'lowpass', rolloff: -12 },
          filterEnvelope: { attack: 0.2, decay: 0.5, sustain: 0.3, release: 1.0, baseFrequency: 300, octaves: 4 }
        }).toDestination();
        
        // The Spirit - Ethereal textures
        this.synths.spirit = new Tone.PolySynth(Tone.Synth, {
          oscillator: { type: 'sine' },
          envelope: { attack: 1.0, decay: 0.8, sustain: 0.6, release: 2.0 },
          filter: { Q: 1, type: 'highpass', rolloff: -12 }
        }).toDestination();
        
        // The Soul - Harmonic resonance
        this.synths.soul = new Tone.FMSynth({
          harmonicity: 3,
          modulationIndex: 10,
          oscillator: { type: 'sine' },
          envelope: { attack: 0.01, decay: 0.01, sustain: 1, release: 0.5 },
          modulation: { type: 'square' },
          modulationEnvelope: { attack: 0.5, decay: 0.2, sustain: 0.2, release: 0.5 }
        }).toDestination();
        
        // Effects for the soul
        this.effects.reverb = new Tone.Reverb(4).toDestination();
        this.effects.delay = new Tone.PingPongDelay(0.25, 0.3).toDestination();
        this.effects.chorus = new Tone.Chorus(4, 2.5, 0.5).toDestination();
        
        // Connect effects
        this.synths.mind.connect(this.effects.reverb);
        this.synths.spirit.connect(this.effects.delay);
        this.synths.soul.connect(this.effects.chorus);
        
        // Set volumes for perfect harmony
        this.synths.heart.volume.value = -6;
        this.synths.breath.volume.value = -15;
        this.synths.mind.volume.value = -12;
        this.synths.spirit.volume.value = -20;
        this.synths.soul.volume.value = -18;
        
        // Musical patterns that evolve
        this.patterns = {
          heart: [1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],
          breath: [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],
          mind: this.generateMelody(),
          spirit: this.generateHarmony(),
          soul: this.generateSoulPattern()
        };
        
        // Start the musical consciousness
        Tone.Transport.bpm.value = 120;
        Tone.Transport.start();
      }
      
      generateMelody() {
        const scales = {
          meditation: ['C4', 'D4', 'E4', 'G4', 'A4'],
          breathing: ['C4', 'E4', 'G4', 'C5', 'E5'],
          dancing: ['C4', 'D#4', 'F4', 'G4', 'A#4'],
          flowing: ['C4', 'D4', 'F4', 'G4', 'A4', 'C5'],
          transcending: ['C4', 'D4', 'E4', 'F#4', 'G#4', 'A#4', 'C5']
        };
        
        return scales[this.soulState] || scales.meditation;
      }
      
      generateHarmony() {
        const chords = {
          meditation: [['C4', 'E4', 'G4'], ['Am', 'C4', 'E4'], ['F4', 'A4', 'C5']],
          breathing: [['C4', 'E4', 'G4'], ['D4', 'F#4', 'A4'], ['G4', 'B4', 'D5']],
          dancing: [['C4', 'E4', 'G4'], ['F4', 'A4', 'C5'], ['G4', 'B4', 'D5']],
          flowing: [['C4', 'E4', 'G4'], ['Am', 'C4', 'E4'], ['F4', 'A4', 'C5'], ['G4', 'B4', 'D5']],
          transcending: [['C4', 'E4', 'G4', 'B4'], ['D4', 'F#4', 'A4', 'C5'], ['G4', 'B4', 'D5', 'F#5']]
        };
        
        return chords[this.soulState] || chords.meditation;
      }
      
      generateSoulPattern() {
        return Array.from({ length: 16 }, (_, i) => Math.sin(i * 0.39) > 0 ? 1 : 0);
      }
      
      startSymphony() {
        // Main consciousness loop
        Tone.Transport.scheduleRepeat((time) => {
          this.composeSoul(time);
          this.step = (this.step + 1) % 16;
        }, '16n');
      }
      
      composeSoul(time) {
        const intensity = this.smoothMotion / 100;
        const pos = this.step % 16;
        
        // Adaptive BPM based on motion
        const targetBPM = 60 + (intensity * 80);
        Tone.Transport.bpm.rampTo(targetBPM, 0.5);
        
        // The Heart - Always present, varies in intensity
        if (this.patterns.heart[pos] && intensity > 0.1) {
          const notes = ['C2', 'F2', 'G2', 'A2'];
          const note = notes[Math.floor(intensity * 4) % 4];
          this.synths.heart.triggerAttackRelease(note, '4n', time, intensity);
        }
        
        // The Breath - Rhythmic foundation
        if (this.patterns.breath[pos] && intensity > 0.2) {
          this.synths.breath.triggerAttackRelease('16n', time, intensity * 0.7);
        }
        
        // The Mind - Melodic thoughts
        if (intensity > 0.3 && pos % 4 === 0) {
          const melody = this.generateMelody();
          const note = melody[Math.floor(Math.random() * melody.length)];
          this.synths.mind.triggerAttackRelease(note, '8n', time, intensity * 0.6);
        }
        
        // The Spirit - Ethereal atmosphere
        if (intensity > 0.5 && pos % 8 === 0) {
          const harmony = this.generateHarmony();
          const chord = harmony[Math.floor(Math.random() * harmony.length)];
          this.synths.spirit.triggerAttackRelease(chord, '2n', time, intensity * 0.4);
        }
        
        // The Soul - Deep harmonic resonance
        if (this.patterns.soul[pos] && intensity > 0.7) {
          const soulNotes = ['C3', 'E3', 'G3', 'B3'];
          const note = soulNotes[pos % 4];
          this.synths.soul.triggerAttackRelease(note, '2n', time, intensity * 0.5);
        }
      }
      
      triggerSoulBurst(x, y) {
        const intensity = this.smoothMotion / 100;
        
        // Trigger a burst of musical energy
        const burstNotes = ['C4', 'E4', 'G4', 'C5'];
        burstNotes.forEach((note, i) => {
          this.synths.mind.triggerAttackRelease(note, '32n', `+${i * 0.05}`, intensity);
        });
        
        // Visual feedback
        this.createSoulBurst(x, y);
      }
      
      createSoulBurst(x, y) {
        const burst = document.createElement('div');
        burst.style.position = 'fixed';
        burst.style.left = (x * window.innerWidth) + 'px';
        burst.style.top = (y * window.innerHeight) + 'px';
        burst.style.width = '20px';
        burst.style.height = '20px';
        burst.style.borderRadius = '50%';
        burst.style.background = 'radial-gradient(circle, #ff006e, #00d4ff)';
        burst.style.pointerEvents = 'none';
        burst.style.transform = 'translate(-50%, -50%) scale(0)';
        burst.style.transition = 'all 0.8s ease-out';
        burst.style.zIndex = '1000';
        
        document.body.appendChild(burst);
        
        requestAnimationFrame(() => {
          burst.style.transform = 'translate(-50%, -50%) scale(3)';
          burst.style.opacity = '0';
        });
        
        setTimeout(() => {
          if (burst.parentNode) {
            burst.parentNode.removeChild(burst);
          }
        }, 800);
      }
      
      createFrequencyVisualizer() {
        const viz = document.getElementById('frequencyViz');
        for (let i = 0; i < 64; i++) {
          const bar = document.createElement('div');
          bar.className = 'freq-bar';
          bar.style.height = '2px';
          viz.appendChild(bar);
        }
      }
      
      updateVisualizations() {
        const intensity = this.smoothMotion / 100;
        
        // Update neural network display
        document.getElementById('motionPulse').style.width = (intensity * 100) + '%';
        document.getElementById('motionValue').textContent = Math.round(intensity * 100) + '%';
        
        document.getElementById('rhythmPulse').style.width = (Math.min(100, Tone.Transport.bpm.value / 2)) + '%';
        document.getElementById('rhythmValue').textContent = Math.round(Tone.Transport.bpm.value) + ' BPM';
        
        const harmonyLevel = intensity > 0.5 ? (intensity - 0.5) * 200 : 0;
        document.getElementById('harmonyPulse').style.width = harmonyLevel + '%';
        document.getElementById('harmonyValue').textContent = intensity > 0.5 ? 'Resonating' : 'Building';
        
        const soulLevel = intensity > 0.7 ? (intensity - 0.7) * 333 : 0;
        document.getElementById('soulPulse').style.width = soulLevel + '%';
        document.getElementById('soulValue').textContent = this.soulState.charAt(0).toUpperCase() + this.soulState.slice(1);
        
        // Update motion aura
        const aura = document.getElementById('motionAura');
        const scale = 1 + (intensity * 2);
        const opacity = Math.min(0.6, intensity * 1.5);
        aura.style.transform = `translate(-50%, -50%) scale(${scale})`;
        aura.style.opacity = opacity;
        
        // Update frequency visualizer
        const freqBars = document.querySelectorAll('.freq-bar');
        freqBars.forEach((bar, i) => {
          const frequency = Math.sin(Date.now() * 0.001 + i * 0.1) * 0.5 + 0.5;
          const height = 2 + (frequency * intensity * 50);
          bar.style.height = height + 'px';
          
          // Color based on frequency and intensity
          if (intensity > 0.7) {
            bar.style.background = 'linear-gradient(to top, #ff006e, #8338ec)';
          } else if (intensity > 0.4) {
            bar.style.background = 'linear-gradient(to top, #00d4ff, #ff006e)';
          } else {
            bar.style.background = 'linear-gradient(to top, #00d4ff, #4ecdc4)';
          }
        });
        
        // Update particle effects based on motion
        if (intensity > 0.5) {
          this.createMotionParticles();
        }
      }
      
      createMotionParticles() {
        const particle = document.createElement('div');
        particle.style.position = 'fixed';
        particle.style.width = '4px';
        particle.style.height = '4px';
        particle.style.borderRadius = '50%';
        particle.style.background = '#00d4ff';
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.top = Math.random() * 100 + 'vh';
        particle.style.pointerEvents = 'none';
        particle.style.animation = 'float 3s ease-out forwards';
        
        document.body.appendChild(particle);
        
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 3000);
      }
      
      animate() {
        if (this.isAwake) {
          this.updateVisualizations();
          
          // Natural motion decay when no input
          if (this.motion > 0) {
            this.motion *= 0.98;
          }
          
          // Evolve patterns based on soul state
          if (this.step % 64 === 0) {
            this.evolvePatterns();
          }
        }
        
        requestAnimationFrame(() => this.animate());
      }
      
      evolvePatterns() {
        // Patterns evolve based on the soul's journey
        const intensity = this.smoothMotion / 100;
        
        if (intensity > 0.8) {
          // Transcendent state - complex patterns
          this.patterns.soul = Array.from({ length: 16 }, (_, i) => 
            Math.sin(i * 0.39 + Date.now() * 0.001) > 0 ? 1 : 0
          );
        } else if (intensity > 0.5) {
          // Flowing state - organic patterns
          this.patterns.heart = this.patterns.heart.map((beat, i) => 
            Math.random() > 0.7 ? 1 - beat : beat
          );
        }
        
        // Regenerate musical elements
        this.patterns.mind = this.generateMelody();
        this.patterns.spirit = this.generateHarmony();
      }
    }
    
    // Initialize GUMP when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      new GumpSymphony();
    });
    
    // Add some additional CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes consciousPulse {
        0%, 100% { transform: scale(1); opacity: 0.8; }
        50% { transform: scale(1.1); opacity: 1; }
      }
      
      .neural-network.active {
        animation: consciousPulse 4s ease-in-out infinite;
      }
      
      .freq-bar:hover {
        filter: brightness(1.5);
      }
      
      body.awakened {
        cursor: crosshair;
      }
      
      .soul-burst {
        position: fixed;
        pointer-events: none;
        z-index: 1000;
        mix-blend-mode: screen;
      }
      
      @media (max-width: 768px) {
        .neural-network {
          width: 90%;
          right: 5%;
        }
        
        .soul-title {
          font-size: clamp(1.5rem, 6vw, 4rem);
        }
        
        .frequency-visualizer {
          width: 95%;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
