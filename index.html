<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GUMP - Pure Motion AI Music</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Courier New', monospace;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      background-size: 400% 400%;
      animation: gradientFlow 12s ease infinite;
      color: #00ffaa;
      overflow: hidden;
      touch-action: none;
    }
    
    @keyframes gradientFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
    }
    
    .title {
      font-size: clamp(2.5rem, 10vw, 5rem);
      text-align: center;
      margin-bottom: 1rem;
      background: linear-gradient(45deg, #00ffaa, #ff6b6b, #4ecdc4, #feca57);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titlePulse 3s ease-in-out infinite;
    }
    
    @keyframes titlePulse {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(1deg); }
    }
    
    .subtitle {
      font-size: clamp(1rem, 4vw, 1.5rem);
      text-align: center;
      margin-bottom: 2rem;
      opacity: 0.9;
      animation: subtitleGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes subtitleGlow {
      from { text-shadow: 0 0 10px rgba(0,255,170,0.5); }
      to { text-shadow: 0 0 20px rgba(0,255,170,0.8); }
    }
    
    .start-btn {
      padding: 25px 50px;
      background: linear-gradient(45deg, #00ffaa, #4ecdc4);
      color: #000;
      border: none;
      border-radius: 50px;
      font-size: clamp(1.2rem, 5vw, 1.8rem);
      font-weight: bold;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 15px 35px rgba(0,255,170,0.4);
      animation: btnFloat 3s ease-in-out infinite;
    }
    
    @keyframes btnFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .start-btn:hover {
      transform: translateY(-15px) scale(1.05);
      box-shadow: 0 25px 50px rgba(0,255,170,0.6);
    }
    
    .interface {
      display: none;
      width: 100%;
      max-width: 500px;
      text-align: center;
    }
    
    .motion-display {
      width: 100%;
      height: 200px;
      background: rgba(0,255,170,0.05);
      border: 2px solid rgba(0,255,170,0.3);
      border-radius: 25px;
      margin: 30px 0;
      position: relative;
      overflow: hidden;
    }
    
    .motion-orb {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0,255,170,0.9), rgba(0,255,170,0.3));
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.3s ease;
      box-shadow: 0 0 30px rgba(0,255,170,0.6);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    
    .stat-card {
      background: rgba(0,255,170,0.08);
      padding: 20px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0,255,170,0.2);
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,255,170,0.2);
    }
    
    .stat-value {
      font-size: clamp(1.8rem, 6vw, 2.5rem);
      font-weight: bold;
      color: #00ffaa;
      margin-bottom: 8px;
    }
    
    .stat-label {
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      opacity: 0.8;
    }
    
    .waveform {
      width: 100%;
      height: 80px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      margin: 20px 0;
      position: relative;
      overflow: hidden;
    }
    
    .wave-bar {
      position: absolute;
      bottom: 0;
      width: 4px;
      background: linear-gradient(to top, #00ffaa, #4ecdc4);
      border-radius: 2px;
      transition: height 0.2s ease;
    }
    
    .ai-brain {
      margin-top: 25px;
      font-size: clamp(1rem, 4vw, 1.3rem);
      color: #4ecdc4;
      text-align: center;
      animation: brainPulse 2s ease-in-out infinite;
    }
    
    @keyframes brainPulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    .hidden { display: none; }
    
    .instruction {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      opacity: 0.6;
      text-align: center;
      animation: instructionBlink 3s ease-in-out infinite;
    }
    
    @keyframes instructionBlink {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">GUMP</div>
    <div class="subtitle">Pure Motion AI â€¢ Move Your Phone</div>
    <button class="start-btn" id="startBtn">ACTIVATE MOTION AI</button>
    
    <div class="interface" id="interface">
      <div class="motion-display">
        <div class="motion-orb" id="motionOrb"></div>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="intensity">0</div>
          <div class="stat-label">Motion</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="bpm">88</div>
          <div class="stat-label">BPM</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="layers">0</div>
          <div class="stat-label">Layers</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="genre">Ambient</div>
          <div class="stat-label">Genre</div>
        </div>
      </div>
      
      <div class="waveform" id="waveform"></div>
      
      <div class="ai-brain" id="aiBrain">ðŸ§  AI Learning Your Movement...</div>
      
      <div class="instruction">Move your phone in any direction</div>
    </div>
  </div>

  <script>
    class PureMotionAI {
      constructor() {
        this.ctx = null;
        this.isActive = false;
        this.motion = 0;
        this.velocity = { x: 0, y: 0, z: 0 };
        this.lastAccel = { x: 0, y: 0, z: 0 };
        this.motionHistory = [];
        this.step = 0;
        this.bpm = 88;
        this.aiMemory = [];
        this.genre = 'Ambient';
        this.lastBeat = 0;
        
        this.patterns = this.generateAIPatterns();
        this.init();
      }
      
      init() {
        document.getElementById('startBtn').onclick = () => this.activate();
        this.createWaveform();
      }
      
      async activate() {
        try {
          this.ctx = new (window.AudioContext || window.webkitAudioContext)();
          await this.ctx.resume();
          
          document.getElementById('startBtn').classList.add('hidden');
          document.getElementById('interface').style.display = 'block';
          
          this.isActive = true;
          this.startMotionDetection();
          this.startAISequencer();
          this.updateVisuals();
          
        } catch (error) {
          console.error('Audio failed:', error);
          this.fallbackToMouseMotion();
        }
      }
      
      startMotionDetection() {
        // Try DeviceMotion first
        if (typeof DeviceMotionEvent !== 'undefined') {
          if (typeof DeviceMotionEvent.requestPermission === 'function') {
            DeviceMotionEvent.requestPermission().then(response => {
              if (response === 'granted') {
                window.addEventListener('devicemotion', (e) => this.handleDeviceMotion(e));
              } else {
                this.fallbackToMouseMotion();
              }
            }).catch(() => this.fallbackToMouseMotion());
          } else {
            window.addEventListener('devicemotion', (e) => this.handleDeviceMotion(e));
          }
        } else {
          this.fallbackToMouseMotion();
        }
        
        // Also try DeviceOrientation for rotation
        if (typeof DeviceOrientationEvent !== 'undefined') {
          window.addEventListener('deviceorientation', (e) => this.handleOrientation(e));
        }
      }
      
      handleDeviceMotion(event) {
        const acc = event.accelerationIncludingGravity;
        if (!acc || acc.x === null) return;
        
        // Calculate motion intensity
        const deltaX = Math.abs(acc.x - this.lastAccel.x);
        const deltaY = Math.abs(acc.y - this.lastAccel.y);
        const deltaZ = Math.abs(acc.z - this.lastAccel.z);
        
        this.motion = Math.min(100, (deltaX + deltaY + deltaZ) * 15);
        this.lastAccel = { x: acc.x, y: acc.y, z: acc.z };
        
        // AI learning from motion patterns
        this.learnFromMotion(acc);
        this.processMotion();
      }
      
      handleOrientation(event) {
        // Add subtle rotation-based effects
        const rotation = Math.abs(event.gamma) + Math.abs(event.beta);
        this.motion = Math.max(this.motion, rotation * 2);
      }
      
      fallbackToMouseMotion() {
        let lastX = 0, lastY = 0;
        
        document.addEventListener('mousemove', (e) => {
          const speed = Math.sqrt(
            Math.pow(e.clientX - lastX, 2) + 
            Math.pow(e.clientY - lastY, 2)
          );
          this.motion = Math.min(100, speed * 3);
          lastX = e.clientX;
          lastY = e.clientY;
          this.processMotion();
        });
      }
      
      learnFromMotion(acc) {
        this.aiMemory.push({
          motion: this.motion,
          acceleration: { x: acc.x, y: acc.y, z: acc.z },
          timestamp: Date.now()
        });
        
        if (this.aiMemory.length > 100) {
          this.aiMemory.shift();
          this.evolvePatterns();
        }
      }
      
      processMotion() {
        this.motionHistory.push(this.motion);
        if (this.motionHistory.length > 10) this.motionHistory.shift();
        
        // Smooth the motion
        this.motion = this.motionHistory.reduce((a, b) => a + b) / this.motionHistory.length;
        
        // Adapt BPM based on motion
        const targetBPM = 60 + (this.motion * 1.2);
        this.bpm += (targetBPM - this.bpm) * 0.1;
        
        // Change genre based on motion patterns
        this.updateGenre();
      }
      
      updateGenre() {
        const avg = this.motionHistory.reduce((a, b) => a + b) / this.motionHistory.length;
        
        if (avg > 75) this.genre = 'Intense';
        else if (avg > 50) this.genre = 'Electronic';
        else if (avg > 25) this.genre = 'Hip-Hop';
        else this.genre = 'Ambient';
      }
      
      generateAIPatterns() {
        const patterns = {};
        
        // Generate patterns using AI-like algorithms
        for (let i = 0; i < 32; i++) {
          const phi = (1 + Math.sqrt(5)) / 2;
          const fibonacci = n => n < 2 ? n : fibonacci(n-1) + fibonacci(n-2);
          
          patterns[i] = {
            kick: (i * phi) % 1 > 0.7,
            snare: fibonacci(i % 8) % 3 === 0,
            hihat: Math.sin(i * 0.785) > 0.2,
            bass: Math.cos(i * 0.618) > 0.5,
            pad: i % 16 === 0
          };
        }
        
        return patterns;
      }
      
      evolvePatterns() {
        // AI evolution based on user motion patterns
        const motionAvg = this.aiMemory.slice(-20).reduce((sum, m) => sum + m.motion, 0) / 20;
        
        // Evolve patterns based on user preference
        Object.keys(this.patterns).forEach(key => {
          const pattern = this.patterns[key];
          if (motionAvg > 60) {
            pattern.kick = Math.random() > 0.6;
            pattern.snare = Math.random() > 0.7;
          } else {
            pattern.kick = Math.random() > 0.8;
            pattern.snare = Math.random() > 0.9;
          }
        });
      }
      
      startAISequencer() {
        const beatInterval = () => 60 / this.bpm / 4 * 1000;
        
        const scheduleBeat = () => {
          if (!this.isActive) return;
          
          this.playBeat();
          this.step = (this.step + 1) % 32;
          
          setTimeout(scheduleBeat, beatInterval());
        };
        
        scheduleBeat();
      }
      
      playBeat() {
        if (this.motion < 5) return;
        
        const pattern = this.patterns[this.step];
        const layers = Math.min(5, Math.floor(this.motion / 15));
        const now = this.ctx.currentTime;
        
        if (layers > 0 && pattern.kick) this.synthKick(now);
        if (layers > 1 && pattern.snare) this.synthSnare(now);
        if (layers > 2 && pattern.hihat) this.synthHihat(now);
        if (layers > 3 && pattern.bass) this.synthBass(now);
        if (layers > 4 && pattern.pad) this.synthPad(now);
      }
      
      synthKick(time) {
        const osc = this.ctx.createOscillator();
        const gain = this.ctx.createGain();
        
        osc.frequency.setValueAtTime(80, time);
        osc.frequency.exponentialRampToValueAtTime(0.01, time + 0.5);
        
        gain.gain.setValueAtTime(0.4, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);
        
        osc.connect(gain);
        gain.connect(this.ctx.destination);
        
        osc.start(time);
        osc.stop(time + 0.5);
      }
      
      synthSnare(time) {
        const noise = this.ctx.createBufferSource();
        const buffer = this.ctx.createBuffer(1, this.ctx.sampleRate * 0.2, this.ctx.sampleRate);
        const data = buffer.getChannelData(0);
        
        for (let i = 0; i < data.length; i++) {
          data[i] = Math.random() * 2 - 1;
        }
        
        noise.buffer = buffer;
        
        const gain = this.ctx.createGain();
        const filter = this.ctx.createBiquadFilter();
        
        filter.type = 'bandpass';
        filter.frequency.value = 1000;
        filter.Q.value = 1;
        
        gain.gain.setValueAtTime(0.3, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.2);
        
        noise.connect(filter);
        filter.connect(gain);
        gain.connect(this.ctx.destination);
        
        noise.start(time);
        noise.stop(time + 0.2);
      }
      
      synthHihat(time) {
        const noise = this.ctx.createBufferSource();
        const buffer = this.ctx.createBuffer(1, this.ctx.sampleRate * 0.1, this.ctx.sampleRate);
        const data = buffer.getChannelData(0);
        
        for (let i = 0; i < data.length; i++) {
          data[i] = Math.random() * 2 - 1;
        }
        
        noise.buffer = buffer;
        
        const gain = this.ctx.createGain();
        const filter = this.ctx.createBiquadFilter();
        
        filter.type = 'highpass';
        filter.frequency.value = 8000;
        
        gain.gain.setValueAtTime(0.15, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.1);
        
        noise.connect(filter);
        filter.connect(gain);
        gain.connect(this.ctx.destination);
        
        noise.start(time);
        noise.stop(time + 0.1);
      }
      
      synthBass(time) {
        const osc = this.ctx.createOscillator();
        const gain = this.ctx.createGain();
        
        const notes = [55, 73.42, 82.41, 97.99, 110];
        const note = notes[Math.floor(this.motion / 20) % notes.length];
        
        osc.frequency.setValueAtTime(note, time);
        osc.type = 'sawtooth';
        
        gain.gain.setValueAtTime(0.2, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.8);
        
        osc.connect(gain);
        gain.connect(this.ctx.destination);
        
        osc.start(time);
        osc.stop(time + 0.8);
      }
      
      synthPad(time) {
        const osc1 = this.ctx.createOscillator();
        const osc2 = this.ctx.createOscillator();
        const gain = this.ctx.createGain();
        
        const chords = [
          [220, 261.63, 329.63], // A minor
          [174.61, 220, 261.63], // F major
          [196, 246.94, 293.66], // G major
          [146.83, 174.61, 220]  // D minor
        ];
        
        const chord = chords[Math.floor(this.step / 8) % chords.length];
        
        osc1.frequency.setValueAtTime(chord[0], time);
        osc2.frequency.setValueAtTime(chord[1], time);
        
        osc1.type = 'sawtooth';
        osc2.type = 'sawtooth';
        
        gain.gain.setValueAtTime(0.1, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 4);
        
        osc1.connect(gain);
        osc2.connect(gain);
        gain.connect(this.ctx.destination);
        
        osc1.start(time);
        osc2.start(time);
        osc1.stop(time + 4);
        osc2.stop(time + 4);
      }
      
      createWaveform() {
        const waveform = document.getElementById('waveform');
        for (let i = 0; i < 50; i++) {
          const bar = document.createElement('div');
          bar.className = 'wave-bar';
          bar.style.left = `${i * 2}%`;
          bar.style.height = '10px';
          waveform.appendChild(bar);
        }
      }
      
      updateVisuals() {
        if (!this.isActive) return;
        
        // Update stats
        document.getElementById('intensity').textContent = Math.round(this.motion);
        document.getElementById('bpm').textContent = Math.round(this.bpm);
        document.getElementById('layers').textContent = Math.min(5, Math.floor(this.motion / 15));
        document.getElementById('genre').textContent = this.genre;
        
        // Update motion orb
        const orb = document.getElementById('motionOrb');
        const scale = 1 + (this.motion / 100);
        orb.style.transform = `translate(-50%, -50%) scale(${scale})`;
        orb.style.boxShadow = `0 0 ${30 + this.motion}px rgba(0,255,170,${0.6 + this.motion/200})`;
        
        // Update waveform
        const bars = document.querySelectorAll('.wave-bar');
        bars.forEach((bar, i) => {
          const height = Math.random() * this.motion + 5;
          bar.style.height = `${height}px`;
        });
        
        // Update AI status
        const brain = document.getElementById('aiBrain');
        const memorySize = this.aiMemory.length;
        if (memorySize > 80) {
          brain.textContent = 'ðŸ§  AI Mastered Your Style âœ¨';
        } else if (memorySize > 40) {
          brain.textContent = 'ðŸ§  AI Adapting Your Rhythm ðŸŽµ';
        } else {
          brain.textContent = 'ðŸ§  AI Learning Your Movement...';
        }
        
        // Decay motion naturally
        this.motion *= 0.95;
        
        requestAnimationFrame(() => this.updateVisuals());
      }
    }
    
    // Initialize when page loads
    window.addEventListener('load', () => {
      new PureMotionAI();
    });
  </script>
</body>
</html>
